var elements=[],loadedImages=[];!function(){"use strict";function e(e,t){var n=!1;try{var a=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("test",null,a)}catch(e){}e.addEventListener("scroll",t,!!n&&{passive:!0})}function t(e,t){var n=e.getBoundingClientRect();return n.bottom+t>=0&&n.left>=0&&n.top-t<=(window.innerHeight||document.documentElement.clientHeight)&&n.right<=(window.innerWidth||document.documentElement.clientWidth)}function n(){0!==elements.length&&(elements=elements.reduce(function(e,n){var i=n.getAttribute("data-src"),r=n.getAttribute("data-sized-src"),c=n.getAttribute("data-current-src");if(i&&c&&i===c)return e;if(!t(n,1e3))return e.push(n),e;var l=n.clientHeight,o=n.clientWidth;switch(r&&l&&o&&(!0,i=r.replace("#height#",l).replace("#width#",o)),n.tagName){case"IMG":case"IFRAME":n.setAttribute("data-current-src",i),n.src=i;break;case"DIV":a(n,i),n.setAttribute("data-current-src",i);break;default:e.push(n)}return e},[]))}function a(e,t){var n="url("+t+")";if(e.style.backgroundImage!==n)if(-1===loadedImages.indexOf(t)){var a=new Image;e.innerHTML='<div class="preload"></div>';e.style.opacity=.7,a.onload=function(){loadedImages.push(t),e.innerHTML="",e.style.opacity=1},a.src=t,e.style.backgroundImage=n}else e.style.backgroundImage=n}function i(e){elements=elements.concat(Array.prototype.slice.call(e.querySelectorAll("img[data-src], iframe[data-src], div[data-src], div[data-sized-src], img[data-sized-src]"))),elements.length>0&&n()}angular.module("angular-lazy-loader",[]).directive("angularLazyLoad",["$window","$timeout","$rootScope","$q",function(t,a,r,c){return{restrict:"EA",scope:!0,link:function(c,l,o){function d(){g&&a.cancel(g),g=a(function(){i(l[0])},100)}function s(){m&&a.cancel(m),m=a(n,100)}var u="false"===o.initOnLoad||!1,g=null,m=null;u||d(),c.$on("$includeContentLoaded",d),r.$on("selectiveLoad",d),window._ll_cb||(console.log("Registrering window callbacks"),e(t,s),angular.element(t).bind("resize",s),window._ll_cb=!0)}}}])}();